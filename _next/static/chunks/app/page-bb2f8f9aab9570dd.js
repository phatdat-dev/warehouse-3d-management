(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3134:(e,s,t)=>{Promise.resolve().then(t.bind(t,4491))},4491:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eP});var a=t(5155),l=t(2115),r=t(2085),i=t(2596),n=t(9688);function d(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.QP)((0,i.$)(s))}let c=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:s,variant:t,...l}=e;return(0,a.jsx)("div",{className:d(c({variant:t}),s),...l})}var x=t(9708);let m=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=l.forwardRef((e,s)=>{let{className:t,variant:l,size:r,asChild:i=!1,...n}=e,c=i?x.DX:"button";return(0,a.jsx)(c,{className:d(m({variant:l,size:r,className:t})),ref:s,...n})});u.displayName="Button";let h=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});h.displayName="Card";let p=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:d("flex flex-col space-y-1.5 p-6",t),...l})});p.displayName="CardHeader";let j=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:d("text-2xl font-semibold leading-none tracking-tight",t),...l})});j.displayName="CardTitle",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:d("text-sm text-muted-foreground",t),...l})}).displayName="CardDescription";let f=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:d("p-6 pt-0",t),...l})});f.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:d("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter";let g=l.forwardRef((e,s)=>{let{className:t,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r})});g.displayName="Input";var v=t(9912),y=t(6474),N=t(7863),b=t(5196);let w=v.bL;v.YJ;let C=v.WT,D=l.forwardRef((e,s)=>{let{className:t,children:l,...r}=e;return(0,a.jsxs)(v.l9,{ref:s,className:d("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[l,(0,a.jsx)(v.In,{asChild:!0,children:(0,a.jsx)(y.A,{className:"h-4 w-4 opacity-50"})})]})});D.displayName=v.l9.displayName;let S=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(v.PP,{ref:s,className:d("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})});S.displayName=v.PP.displayName;let P=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(v.wn,{ref:s,className:d("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(y.A,{className:"h-4 w-4"})})});P.displayName=v.wn.displayName;let E=l.forwardRef((e,s)=>{let{className:t,children:l,position:r="popper",...i}=e;return(0,a.jsx)(v.ZL,{children:(0,a.jsxs)(v.UC,{ref:s,className:d("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,a.jsx)(S,{}),(0,a.jsx)(v.LM,{className:d("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(P,{})]})})});E.displayName=v.UC.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(v.JU,{ref:s,className:d("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=v.JU.displayName;let k=l.forwardRef((e,s)=>{let{className:t,children:l,...r}=e;return(0,a.jsxs)(v.q7,{ref:s,className:d("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(v.VF,{children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})}),(0,a.jsx)(v.p4,{children:l})]})});k.displayName=v.q7.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(v.wv,{ref:s,className:d("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=v.wv.displayName;var A=t(6047),R=t(8842),F=t(9957),I=t(4688),q=t(7558),L=t(7108),z=t(9869),T=t(1788),O=t(7924),U=t(4516),V=t(4616),B=t(2657),M=t(5452),W=t(4416);let _=M.bL;M.l9;let H=M.ZL;M.bm;let Q=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(M.hJ,{ref:s,className:d("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});Q.displayName=M.hJ.displayName;let Y=l.forwardRef((e,s)=>{let{className:t,children:l,...r}=e;return(0,a.jsxs)(H,{children:[(0,a.jsx)(Q,{}),(0,a.jsxs)(M.UC,{ref:s,className:d("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[l,(0,a.jsxs)(M.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(W.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});Y.displayName=M.UC.displayName;let G=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:d("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};G.displayName="DialogHeader";let J=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(M.hE,{ref:s,className:d("text-lg font-semibold leading-none tracking-tight",t),...l})});J.displayName=M.hE.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(M.VY,{ref:s,className:d("text-sm text-muted-foreground",t),...l})}).displayName=M.VY.displayName;var $=t(968);let K=(0,r.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)($.b,{ref:s,className:d(K(),t),...l})});X.displayName=$.b.displayName;let Z=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("textarea",{className:d("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});function ee(e){let{isOpen:s,onClose:t,pallet:r,onSave:i,slotLocation:n}=e,[d,c]=(0,l.useState)({productCode:"",quantity:0,entryDate:"",expiryDate:"",status:"normal",weight:0,length:120,width:100,height:80,supplier:"",notes:""});return(0,l.useEffect)(()=>{r?c({productCode:r.productCode,quantity:r.quantity,entryDate:r.entryDate,expiryDate:r.expiryDate,status:r.status,weight:r.weight,length:r.dimensions.length,width:r.dimensions.width,height:r.dimensions.height,supplier:r.supplier,notes:r.notes}):c({productCode:"",quantity:0,entryDate:new Date().toISOString().split("T")[0],expiryDate:"",status:"normal",weight:0,length:120,width:100,height:80,supplier:"",notes:""})},[r,s]),(0,a.jsx)(_,{open:s,onOpenChange:t,children:(0,a.jsxs)(Y,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(G,{children:(0,a.jsxs)(J,{children:[r?"Edit Pallet":"Add New Pallet",n&&(0,a.jsxs)("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["- ",n]})]})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({productCode:d.productCode,quantity:d.quantity,entryDate:d.entryDate,expiryDate:d.expiryDate,status:d.status,color:{normal:"#4ade80",expiring:"#fbbf24",expired:"#ef4444",processing:"#3b82f6",reserved:"#8b5cf6"}[d.status],weight:d.weight,dimensions:{length:d.length,width:d.width,height:d.height},supplier:d.supplier,notes:d.notes})},className:"space-y-6",children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(j,{className:"text-lg",children:"Basic Information"})}),(0,a.jsxs)(f,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"productCode",children:"Product Code *"}),(0,a.jsx)(g,{id:"productCode",value:d.productCode,onChange:e=>c({...d,productCode:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"quantity",children:"Quantity *"}),(0,a.jsx)(g,{id:"quantity",type:"number",value:d.quantity,onChange:e=>c({...d,quantity:Number.parseInt(e.target.value)||0}),required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"entryDate",children:"Entry Date *"}),(0,a.jsx)(g,{id:"entryDate",type:"date",value:d.entryDate,onChange:e=>c({...d,entryDate:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"expiryDate",children:"Expiry Date"}),(0,a.jsx)(g,{id:"expiryDate",type:"date",value:d.expiryDate,onChange:e=>c({...d,expiryDate:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"status",children:"Status *"}),(0,a.jsxs)(w,{value:d.status,onValueChange:e=>c({...d,status:e}),children:[(0,a.jsx)(D,{children:(0,a.jsx)(C,{})}),(0,a.jsxs)(E,{children:[(0,a.jsx)(k,{value:"normal",children:"Normal"}),(0,a.jsx)(k,{value:"expiring",children:"Expiring"}),(0,a.jsx)(k,{value:"expired",children:"Expired"}),(0,a.jsx)(k,{value:"processing",children:"Processing"}),(0,a.jsx)(k,{value:"reserved",children:"Reserved"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"supplier",children:"Supplier"}),(0,a.jsx)(g,{id:"supplier",value:d.supplier,onChange:e=>c({...d,supplier:e.target.value})})]})]})]})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(j,{className:"text-lg",children:"Physical Properties"})}),(0,a.jsxs)(f,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"weight",children:"Weight (kg)"}),(0,a.jsx)(g,{id:"weight",type:"number",value:d.weight,onChange:e=>c({...d,weight:Number.parseFloat(e.target.value)||0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{children:"Dimensions (cm)"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[(0,a.jsx)(g,{placeholder:"Length",type:"number",value:d.length,onChange:e=>c({...d,length:Number.parseFloat(e.target.value)||0})}),(0,a.jsx)(g,{placeholder:"Width",type:"number",value:d.width,onChange:e=>c({...d,width:Number.parseFloat(e.target.value)||0})}),(0,a.jsx)(g,{placeholder:"Height",type:"number",value:d.height,onChange:e=>c({...d,height:Number.parseFloat(e.target.value)||0})})]})]})]})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(j,{className:"text-lg",children:"Additional Information"})}),(0,a.jsx)(f,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"notes",children:"Notes"}),(0,a.jsx)(Z,{id:"notes",value:d.notes,onChange:e=>c({...d,notes:e.target.value}),rows:3})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(u,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsx)(u,{type:"submit",children:r?"Update Pallet":"Create Pallet"})]})]})]})})}Z.displayName="Textarea";var es=t(64);let et=es.bL,ea=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(es.B8,{ref:s,className:d("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...l})});ea.displayName=es.B8.displayName;let el=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(es.l9,{ref:s,className:d("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...l})});el.displayName=es.l9.displayName;let er=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(es.UC,{ref:s,className:d("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...l})});er.displayName=es.UC.displayName;let ei=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:d("w-full caption-bottom text-sm",t),...l})})});ei.displayName="Table";let en=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("thead",{ref:s,className:d("[&_tr]:border-b",t),...l})});en.displayName="TableHeader";let ed=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tbody",{ref:s,className:d("[&_tr:last-child]:border-0",t),...l})});ed.displayName="TableBody",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tfoot",{ref:s,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...l})}).displayName="TableFooter";let ec=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("tr",{ref:s,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...l})});ec.displayName="TableRow";let eo=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("th",{ref:s,className:d("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...l})});eo.displayName="TableHead";let ex=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("td",{ref:s,className:d("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...l})});ex.displayName="TableCell",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("caption",{ref:s,className:d("mt-4 text-sm text-muted-foreground",t),...l})}).displayName="TableCaption";var em=t(3717),eu=t(2525),eh=t(9074),ep=t(1007),ej=t(7434);function ef(e){let{isOpen:s,onClose:t,pallet:l,slotLocation:r,onEditPallet:i,onDeletePallet:n,onAddProduct:d,onEditProduct:c,onDeleteProduct:x}=e;if(!l)return null;let m=l.products.reduce((e,s)=>e+s.quantity*s.unitPrice,0),g=l.products.reduce((e,s)=>e+s.quantity,0);return(0,a.jsx)(_,{open:s,onOpenChange:t,children:(0,a.jsxs)(Y,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(G,{children:(0,a.jsxs)(J,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.A,{className:"h-6 w-6"}),(0,a.jsxs)("span",{children:["Pallet Details - ",l.productCode]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(u,{onClick:()=>i(l),size:"sm",variant:"outline",children:[(0,a.jsx)(em.A,{className:"h-4 w-4 mr-2"}),"Edit Pallet"]}),(0,a.jsxs)(u,{onClick:n,size:"sm",variant:"destructive",children:[(0,a.jsx)(eu.A,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})}),(0,a.jsxs)(et,{defaultValue:"overview",className:"w-full",children:[(0,a.jsxs)(ea,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(el,{value:"overview",children:"Overview"}),(0,a.jsxs)(el,{value:"products",children:["Products (",l.products.length,")"]}),(0,a.jsx)(el,{value:"details",children:"Details"})]}),(0,a.jsxs)(er,{value:"overview",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{className:"pb-2",children:(0,a.jsx)(j,{className:"text-sm font-medium text-gray-600",children:"Location"})}),(0,a.jsx)(f,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:r})})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{className:"pb-2",children:(0,a.jsx)(j,{className:"text-sm font-medium text-gray-600",children:"Total Products"})}),(0,a.jsx)(f,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:g})})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{className:"pb-2",children:(0,a.jsx)(j,{className:"text-sm font-medium text-gray-600",children:"Total Value"})}),(0,a.jsx)(f,{children:(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",m.toLocaleString()]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(j,{className:"text-lg",children:"Pallet Information"})}),(0,a.jsxs)(f,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Product Code:"}),(0,a.jsx)("span",{className:"font-medium",children:l.productCode})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Status:"}),(0,a.jsx)(o,{variant:"outline",style:{backgroundColor:l.color+"20",borderColor:l.color,color:l.color},children:l.status})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Entry Date:"}),(0,a.jsx)("span",{className:"font-medium",children:l.entryDate})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Expiry Date:"}),(0,a.jsx)("span",{className:"font-medium",children:l.expiryDate})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Supplier:"}),(0,a.jsx)("span",{className:"font-medium",children:l.supplier})]})]})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(j,{className:"text-lg",children:"Physical Properties"})}),(0,a.jsxs)(f,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Weight:"}),(0,a.jsxs)("span",{className:"font-medium",children:[l.weight," kg"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Dimensions:"}),(0,a.jsxs)("span",{className:"font-medium",children:[l.dimensions.length," \xd7 ",l.dimensions.width," \xd7 ",l.dimensions.height," cm"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Volume:"}),(0,a.jsxs)("span",{className:"font-medium",children:[(l.dimensions.length*l.dimensions.width*l.dimensions.height/1e6).toFixed(2)," ","m\xb3"]})]})]})]})]}),l.notes&&(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(j,{className:"text-lg",children:"Notes"})}),(0,a.jsx)(f,{children:(0,a.jsx)("p",{className:"text-gray-700",children:l.notes})})]})]}),(0,a.jsxs)(er,{value:"products",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Products in Pallet"}),(0,a.jsxs)(u,{onClick:d,size:"sm",children:[(0,a.jsx)(V.A,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),l.products.length>0?(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(ei,{children:[(0,a.jsx)(en,{children:(0,a.jsxs)(ec,{children:[(0,a.jsx)(eo,{children:"Product Name"}),(0,a.jsx)(eo,{children:"SKU"}),(0,a.jsx)(eo,{children:"Category"}),(0,a.jsx)(eo,{children:"Quantity"}),(0,a.jsx)(eo,{children:"Unit Price"}),(0,a.jsx)(eo,{children:"Total Value"}),(0,a.jsx)(eo,{children:"Expiry Date"}),(0,a.jsx)(eo,{children:"Actions"})]})}),(0,a.jsx)(ed,{children:l.products.map(e=>(0,a.jsxs)(ec,{children:[(0,a.jsx)(ex,{className:"font-medium",children:e.name}),(0,a.jsx)(ex,{children:e.sku}),(0,a.jsx)(ex,{children:(0,a.jsx)(o,{variant:"secondary",children:e.category})}),(0,a.jsx)(ex,{children:e.quantity}),(0,a.jsxs)(ex,{children:["$",e.unitPrice]}),(0,a.jsxs)(ex,{children:["$",(e.quantity*e.unitPrice).toLocaleString()]}),(0,a.jsx)(ex,{children:e.expiryDate}),(0,a.jsx)(ex,{children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(u,{onClick:()=>c(e),size:"sm",variant:"outline",children:(0,a.jsx)(em.A,{className:"h-3 w-3"})}),(0,a.jsx)(u,{onClick:()=>x(e.id),size:"sm",variant:"destructive",children:(0,a.jsx)(eu.A,{className:"h-3 w-3"})})]})})]},e.id))})]})}):(0,a.jsx)(h,{children:(0,a.jsxs)(f,{className:"text-center py-8",children:[(0,a.jsx)(L.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No products in this pallet"}),(0,a.jsxs)(u,{onClick:d,children:[(0,a.jsx)(V.A,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})})]}),(0,a.jsx)(er,{value:"details",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsxs)(j,{className:"text-lg flex items-center",children:[(0,a.jsx)(eh.A,{className:"h-5 w-5 mr-2"}),"Timeline"]})}),(0,a.jsxs)(f,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Entry Date"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:l.entryDate})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Expiry Date"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:l.expiryDate})]})]})]})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsxs)(j,{className:"text-lg flex items-center",children:[(0,a.jsx)(ep.A,{className:"h-5 w-5 mr-2"}),"Supplier Information"]})}),(0,a.jsx)(f,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"font-medium",children:l.supplier}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Primary supplier for this pallet"})]})})]}),(0,a.jsxs)(h,{className:"md:col-span-2",children:[(0,a.jsx)(p,{children:(0,a.jsxs)(j,{className:"text-lg flex items-center",children:[(0,a.jsx)(ej.A,{className:"h-5 w-5 mr-2"}),"Additional Information"]})}),(0,a.jsx)(f,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Pallet ID:"}),(0,a.jsx)("div",{className:"text-gray-600",children:l.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Product Categories:"}),(0,a.jsx)("div",{className:"text-gray-600",children:Array.from(new Set(l.products.map(e=>e.category))).join(", ")||"None"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Batch Numbers:"}),(0,a.jsx)("div",{className:"text-gray-600",children:Array.from(new Set(l.products.map(e=>e.batchNumber))).join(", ")||"None"})]})]})})]})]})})]})]})})}function eg(e){let{isOpen:s,onClose:t,product:r,onSave:i}=e,[n,d]=(0,l.useState)({name:"",sku:"",quantity:0,unitPrice:0,category:"",description:"",batchNumber:"",manufacturingDate:"",expiryDate:""});return(0,l.useEffect)(()=>{r?d({name:r.name,sku:r.sku,quantity:r.quantity,unitPrice:r.unitPrice,category:r.category,description:r.description,batchNumber:r.batchNumber,manufacturingDate:r.manufacturingDate,expiryDate:r.expiryDate}):d({name:"",sku:"",quantity:0,unitPrice:0,category:"",description:"",batchNumber:"",manufacturingDate:new Date().toISOString().split("T")[0],expiryDate:""})},[r,s]),(0,a.jsx)(_,{open:s,onOpenChange:t,children:(0,a.jsxs)(Y,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(G,{children:(0,a.jsx)(J,{children:r?"Edit Product":"Add New Product"})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(n)},className:"space-y-6",children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(j,{className:"text-lg",children:"Product Information"})}),(0,a.jsxs)(f,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"name",children:"Product Name *"}),(0,a.jsx)(g,{id:"name",value:n.name,onChange:e=>d({...n,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"sku",children:"SKU *"}),(0,a.jsx)(g,{id:"sku",value:n.sku,onChange:e=>d({...n,sku:e.target.value}),required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"quantity",children:"Quantity *"}),(0,a.jsx)(g,{id:"quantity",type:"number",value:n.quantity,onChange:e=>d({...n,quantity:Number.parseInt(e.target.value)||0}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"unitPrice",children:"Unit Price ($) *"}),(0,a.jsx)(g,{id:"unitPrice",type:"number",step:"0.01",value:n.unitPrice,onChange:e=>d({...n,unitPrice:Number.parseFloat(e.target.value)||0}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"category",children:"Category *"}),(0,a.jsxs)(w,{value:n.category,onValueChange:e=>d({...n,category:e}),children:[(0,a.jsx)(D,{children:(0,a.jsx)(C,{placeholder:"Select category"})}),(0,a.jsx)(E,{children:["Electronics","Clothing","Food","Tools","Books","Medical","Automotive","Home & Garden"].map(e=>(0,a.jsx)(k,{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"description",children:"Description"}),(0,a.jsx)(Z,{id:"description",value:n.description,onChange:e=>d({...n,description:e.target.value}),rows:3})]})]})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(j,{className:"text-lg",children:"Batch & Dates"})}),(0,a.jsxs)(f,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"batchNumber",children:"Batch Number"}),(0,a.jsx)(g,{id:"batchNumber",value:n.batchNumber,onChange:e=>d({...n,batchNumber:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"manufacturingDate",children:"Manufacturing Date"}),(0,a.jsx)(g,{id:"manufacturingDate",type:"date",value:n.manufacturingDate,onChange:e=>d({...n,manufacturingDate:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{htmlFor:"expiryDate",children:"Expiry Date"}),(0,a.jsx)(g,{id:"expiryDate",type:"date",value:n.expiryDate,onChange:e=>d({...n,expiryDate:e.target.value})})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(u,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsx)(u,{type:"submit",children:r?"Update Product":"Add Product"})]})]})]})})}class ev extends l.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){var t,a;console.error("3D Canvas Error:",e,s),null===(t=(a=this.props).onError)||void 0===t||t.call(a)}render(){return this.state.hasError?this.props.fallback||(0,a.jsx)("div",{className:"h-full flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-4",children:(0,a.jsx)(L.A,{className:"h-16 w-16 mx-auto mb-4"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"3D View Error"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"There was an error loading the 3D visualization."}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Please refresh the page or try a different browser."}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Reload Page"})]})}):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}class ey{next(){return this.seed=(9301*this.seed+49297)%233280,this.seed/233280}nextInt(e){return Math.floor(this.next()*e)}nextInRange(e,s){return e+this.next()*(s-e)}constructor(e){this.seed=e}}let eN=()=>{let e=new ey(12345),s=[];return["A","B","C","D"].forEach((t,a)=>{for(let l=1;l<=8;l++)for(let r=1;r<=4;r++){let i;let n=6*a-9,d=2*l-8,c=1.5*r-.5,o="".concat(t).concat(l.toString().padStart(2,"0")).concat(r),x=e.next()>.3;if(x){let s=["normal","expiring","expired","processing","reserved"],t=s[e.nextInt(s.length)],a={normal:"#4ade80",expiring:"#fbbf24",expired:"#ef4444",processing:"#3b82f6",reserved:"#8b5cf6"};i={id:"P".concat(e.nextInt(1e6).toString(16).toUpperCase()),productCode:"PROD-".concat(e.nextInt(1e4).toString(16).toUpperCase()),quantity:e.nextInt(100)+1,entryDate:new Date(Date.now()-e.nextInt(2592e6)).toISOString().split("T")[0],expiryDate:new Date(Date.now()+e.nextInt(7776e6)).toISOString().split("T")[0],status:t,color:a[t],products:[],weight:0,dimensions:{length:120,width:100,height:80},supplier:"",notes:""};let l=e.nextInt(3)+1,r=[];for(let s=0;s<l;s++)r.push({id:"PROD-".concat(e.nextInt(1e6).toString(16).toUpperCase()),name:"Product ".concat(s+1),sku:"SKU-".concat(e.nextInt(1e6).toString(16).toUpperCase()),quantity:e.nextInt(50)+1,unitPrice:e.nextInt(100)+10,category:["Electronics","Clothing","Food","Tools","Books"][e.nextInt(5)],description:"Description for product ".concat(s+1),batchNumber:"BATCH-".concat(e.nextInt(1e4).toString(16).toUpperCase()),manufacturingDate:new Date(Date.now()-e.nextInt(5184e6)).toISOString().split("T")[0],expiryDate:new Date(Date.now()+e.nextInt(15552e6)).toISOString().split("T")[0]});i.products=r,i.weight=e.nextInt(500)+100,i.supplier=["Supplier A","Supplier B","Supplier C"][e.nextInt(3)],i.notes="Sample pallet notes"}s.push({id:o,location:o,aisle:t,bay:l.toString().padStart(2,"0"),level:r,x:n,y:c,z:d,width:1.2,height:1.2,depth:1.2,occupied:x,pallet:i})}}),s};function eb(e){var s;let{slot:t,isSelected:r,onSelect:i}=e,n=(0,l.useRef)(null),d=(null===(s=t.pallet)||void 0===s?void 0:s.color)||"#6b7280";return(0,a.jsxs)("group",{position:[t.x,t.y,t.z],onClick:()=>i(t),children:[(0,a.jsx)(A.az,{ref:n,args:[t.width,t.height,t.depth],position:[0,0,0],children:(0,a.jsx)("meshStandardMaterial",{color:r?"#ffffff":"#e5e7eb",wireframe:!0,transparent:!0,opacity:.3})}),t.occupied&&t.pallet&&(0,a.jsx)(A.az,{args:[.8*t.width,.8*t.height,.8*t.depth],position:[0,0,0],children:(0,a.jsx)("meshStandardMaterial",{color:d})}),(0,a.jsx)(R.E,{position:[0,t.height/2+.3,0],fontSize:.2,color:"#374151",anchorX:"center",anchorY:"middle",children:t.location}),r&&t.pallet&&(0,a.jsx)(F.E,{position:[0,t.height/2+.8,0],center:!0,children:(0,a.jsxs)("div",{className:"bg-white p-2 rounded shadow-lg border text-xs min-w-48",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("div",{className:"font-semibold",children:t.pallet.productCode}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),window.handleEditPalletFromSlot&&t.pallet&&window.handleEditPalletFromSlot(t.pallet)},className:"ml-2 px-2 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600 transition-colors",children:"Edit"})]}),(0,a.jsxs)("div",{children:["Qty: ",t.pallet.quantity]}),(0,a.jsxs)("div",{children:["Status:"," ",(0,a.jsx)(o,{variant:"outline",className:"text-xs",children:t.pallet.status})]}),(0,a.jsxs)("div",{children:["Entry: ",t.pallet.entryDate]}),(0,a.jsxs)("div",{children:["Expiry: ",t.pallet.expiryDate]})]})})]})}function ew(){return(0,a.jsx)(A.az,{args:[24,.1,20],position:[0,-1,0],children:(0,a.jsx)("meshStandardMaterial",{color:"#f3f4f6"})})}function eC(){return(0,a.jsx)(a.Fragment,{children:["A","B","C","D"].map((e,s)=>(0,a.jsxs)(R.E,{position:[6*s-9,-.5,-10],fontSize:.8,color:"#1f2937",anchorX:"center",anchorY:"middle",children:["AISLE ",e]},e))})}function eD(e){let{slots:s,selectedSlot:t,onSlotSelect:r,onError:i}=e,[n,d]=(0,l.useState)(!0),[c,o]=(0,l.useState)(null),[x,m]=(0,l.useState)(!1),[u,h]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{m(!0);let e=setTimeout(()=>{h(!1)},100);return()=>clearTimeout(e)},[]),(0,l.useEffect)(()=>{if(x)try{let e=document.createElement("canvas");e.getContext("webgl")||e.getContext("experimental-webgl")||(d(!1),o("WebGL is not supported in your browser"))}catch(e){console.error("WebGL check failed:",e),d(!1),o("WebGL is not supported in your browser"),null==i||i()}},[x,i]),!x||u)?(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Initializing 3D view..."})]})}):!n||c?(0,a.jsx)("div",{className:"h-full flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-4",children:(0,a.jsx)(L.A,{className:"h-16 w-16 mx-auto mb-4"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"3D View Not Available"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:c||"Your browser does not support WebGL, which is required for 3D visualization."}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Please use a modern browser like Chrome, Firefox, Safari, or Edge."})]})}):(0,a.jsx)("div",{className:"h-full w-full",style:{minHeight:"600px"},children:(0,a.jsxs)(q.Hl,{camera:{position:[15,10,15],fov:60},dpr:[1,2],performance:{min:.5},onCreated:e=>{let{gl:s,scene:t,camera:a}=e;try{s.setClearColor("#f8fafc"),s.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.position.set(15,10,15),a.lookAt(0,0,0)}catch(e){console.error("Canvas setup error:",e),o("Failed to initialize 3D renderer")}},onError:e=>{console.error("Canvas error:",e),o("Failed to load 3D view"),null==i||i()},fallback:(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading 3D view..."})]})}),children:[(0,a.jsx)("ambientLight",{intensity:.6}),(0,a.jsx)("directionalLight",{position:[10,10,5],intensity:1}),(0,a.jsx)(ew,{}),(0,a.jsx)(eC,{}),s.map(e=>(0,a.jsx)(eb,{slot:e,isSelected:(null==t?void 0:t.id)===e.id,onSelect:r},e.id)),(0,a.jsx)(I.N,{enablePan:!0,enableZoom:!0,enableRotate:!0,maxPolarAngle:Math.PI/2,minDistance:5,maxDistance:50,enableDamping:!0,dampingFactor:.05})]})})}function eS(e){let{slots:s,selectedSlot:t,onSlotSelect:r}=e,i=(0,l.useMemo)(()=>{let e=s.reduce((e,s)=>(e[s.aisle]||(e[s.aisle]=[]),e[s.aisle].push(s),e),{});return Object.keys(e).forEach(s=>{e[s].sort((e,s)=>e.bay!==s.bay?e.bay.localeCompare(s.bay):e.level-s.level)}),e},[s]);return(0,a.jsx)("div",{className:"h-full w-full overflow-auto p-4 bg-gray-50",children:(0,a.jsx)("div",{className:"space-y-6",children:Object.entries(i).map(e=>{let[s,l]=e;return(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:["Aisle ",s]}),(0,a.jsx)("div",{className:"grid grid-cols-8 gap-2",children:l.map(e=>{var s,l,i,n;return(0,a.jsxs)("div",{onClick:()=>r(e),className:"\n                    relative h-12 w-12 rounded border-2 cursor-pointer transition-all\n                    ".concat((null==t?void 0:t.id)===e.id?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-gray-400","\n                  "),style:{backgroundColor:e.occupied?(null===(s=e.pallet)||void 0===s?void 0:s.color)||"#6b7280":"#ffffff"},title:"".concat(e.location," - ").concat(e.occupied?"".concat(null===(l=e.pallet)||void 0===l?void 0:l.productCode," (").concat(null===(i=e.pallet)||void 0===i?void 0:i.status,")"):"Empty"),children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700",children:e.location})}),e.occupied&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full border border-white",style:{backgroundColor:null===(n=e.pallet)||void 0===n?void 0:n.color}})]},e.id)})})]},s)})})})}function eP(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)(!0),[i,n]=(0,l.useState)(null),[d,c]=(0,l.useState)(""),[x,m]=(0,l.useState)("all"),[v,y]=(0,l.useState)("all"),[N,b]=(0,l.useState)(!1),[S,P]=(0,l.useState)(!1),[A,R]=(0,l.useState)(!1),[F,I]=(0,l.useState)(null),[q,M]=(0,l.useState)(null);(0,l.useEffect)(()=>{s(eN()),r(!1)},[]);let[W,_]=(0,l.useState)(null),[H,Q]=(0,l.useState)(!0),[Y,G]=(0,l.useState)(!1);(0,l.useEffect)(()=>(window.handleEditPalletFromSlot=e=>{I(e),P(!0)},()=>{delete window.handleEditPalletFromSlot}),[]);let J=(0,l.useMemo)(()=>e.filter(e=>{var s,t;let a=!d||e.location.toLowerCase().includes(d.toLowerCase())||(null===(s=e.pallet)||void 0===s?void 0:s.productCode.toLowerCase().includes(d.toLowerCase())),l="all"===x||"empty"===x&&!e.occupied||"empty"!==x&&(null===(t=e.pallet)||void 0===t?void 0:t.status)===x,r="all"===v||e.aisle===v;return a&&l&&r}),[e,d,x,v]),$=(0,l.useMemo)(()=>{let s=e.length,t=e.filter(e=>e.occupied).length;return{total:s,occupied:t,empty:s-t,expiring:e.filter(e=>{var s;return(null===(s=e.pallet)||void 0===s?void 0:s.status)==="expiring"}).length,expired:e.filter(e=>{var s;return(null===(s=e.pallet)||void 0===s?void 0:s.status)==="expired"}).length}},[e]),K=e=>{n((null==i?void 0:i.id)===e.id?null:e)},X=s=>{I(null),n(e.find(e=>e.id===s)||null),P(!0)},Z=e=>{confirm("Are you sure you want to delete this pallet?")&&(s(s=>s.map(s=>s.id===e?{...s,occupied:!1,pallet:void 0}:s)),n(null),b(!1))};return t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading warehouse data..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(L.A,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Warehouse 3D Management"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Visual inventory and layout management system"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(u,{onClick:()=>{s(eN()),n(null)},variant:"outline",size:"sm",children:[(0,a.jsx)(z.A,{className:"h-4 w-4 mr-2"}),"Import CSV"]}),(0,a.jsxs)(u,{onClick:()=>{console.log("Exporting CSV data:",e.map(e=>{var s,t,a,l,r;return{Location:e.location,Aisle:e.aisle,Bay:e.bay,Level:e.level,Occupied:e.occupied,ProductCode:(null===(s=e.pallet)||void 0===s?void 0:s.productCode)||"",Quantity:(null===(t=e.pallet)||void 0===t?void 0:t.quantity)||0,Status:(null===(a=e.pallet)||void 0===a?void 0:a.status)||"",EntryDate:(null===(l=e.pallet)||void 0===l?void 0:l.entryDate)||"",ExpiryDate:(null===(r=e.pallet)||void 0===r?void 0:r.expiryDate)||""}})),alert("CSV export functionality would download the data here")},variant:"outline",size:"sm",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(j,{className:"text-lg",children:"Warehouse Stats"})}),(0,a.jsxs)(f,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Total Slots:"}),(0,a.jsx)("span",{className:"font-semibold",children:$.total})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Occupied:"}),(0,a.jsx)("span",{className:"font-semibold text-green-600",children:$.occupied})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Empty:"}),(0,a.jsx)("span",{className:"font-semibold text-gray-500",children:$.empty})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Expiring:"}),(0,a.jsx)("span",{className:"font-semibold text-yellow-600",children:$.expiring})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Expired:"}),(0,a.jsx)("span",{className:"font-semibold text-red-600",children:$.expired})]})]})]}),(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(j,{className:"text-lg",children:"Search & Filter"})}),(0,a.jsxs)(f,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(O.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,a.jsx)(g,{placeholder:"Search location or product...",value:d,onChange:e=>c(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),(0,a.jsxs)(w,{value:x,onValueChange:m,children:[(0,a.jsx)(D,{children:(0,a.jsx)(C,{})}),(0,a.jsxs)(E,{children:[(0,a.jsx)(k,{value:"all",children:"All Status"}),(0,a.jsx)(k,{value:"empty",children:"Empty"}),(0,a.jsx)(k,{value:"normal",children:"Normal"}),(0,a.jsx)(k,{value:"expiring",children:"Expiring"}),(0,a.jsx)(k,{value:"expired",children:"Expired"}),(0,a.jsx)(k,{value:"processing",children:"Processing"}),(0,a.jsx)(k,{value:"reserved",children:"Reserved"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Aisle"}),(0,a.jsxs)(w,{value:v,onValueChange:y,children:[(0,a.jsx)(D,{children:(0,a.jsx)(C,{})}),(0,a.jsxs)(E,{children:[(0,a.jsx)(k,{value:"all",children:"All Aisles"}),(0,a.jsx)(k,{value:"A",children:"Aisle A"}),(0,a.jsx)(k,{value:"B",children:"Aisle B"}),(0,a.jsx)(k,{value:"C",children:"Aisle C"}),(0,a.jsx)(k,{value:"D",children:"Aisle D"})]})]})]})]})]}),i&&(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsxs)(j,{className:"text-lg flex items-center",children:[(0,a.jsx)(U.A,{className:"h-5 w-5 mr-2"}),"Slot Details"]})}),(0,a.jsxs)(f,{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Location:"}),(0,a.jsx)("span",{className:"ml-2",children:i.location})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Position:"}),(0,a.jsxs)("span",{className:"ml-2",children:["Aisle ",i.aisle,", Bay ",i.bay,", Level ",i.level]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Status:"}),(0,a.jsx)(o,{variant:i.occupied?"default":"secondary",className:"ml-2",children:i.occupied?"Occupied":"Empty"})]}),i.pallet&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Product:"}),(0,a.jsx)("span",{className:"ml-2",children:i.pallet.productCode})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Quantity:"}),(0,a.jsx)("span",{className:"ml-2",children:i.pallet.quantity})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Entry Date:"}),(0,a.jsx)("span",{className:"ml-2",children:i.pallet.entryDate})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Expiry Date:"}),(0,a.jsx)("span",{className:"ml-2",children:i.pallet.expiryDate})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Status:"}),(0,a.jsx)(o,{variant:"outline",className:"ml-2",style:{backgroundColor:i.pallet.color+"20",borderColor:i.pallet.color,color:i.pallet.color},children:i.pallet.status})]})]})]})]}),i&&!i.occupied&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(u,{onClick:()=>X(i.id),className:"w-full",children:[(0,a.jsx)(V.A,{className:"h-4 w-4 mr-2"}),"Add Pallet to This Slot"]})}),(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(j,{className:"text-lg",children:"Status Legend"})}),(0,a.jsxs)(f,{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-green-400 rounded"}),(0,a.jsx)("span",{className:"text-sm",children:"Normal"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-yellow-400 rounded"}),(0,a.jsx)("span",{className:"text-sm",children:"Expiring"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-red-400 rounded"}),(0,a.jsx)("span",{className:"text-sm",children:"Expired"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-blue-400 rounded"}),(0,a.jsx)("span",{className:"text-sm",children:"Processing"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-purple-400 rounded"}),(0,a.jsx)("span",{className:"text-sm",children:"Reserved"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"text-sm",children:"Empty"})]})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsxs)(h,{className:"h-[800px]",children:[(0,a.jsx)(p,{children:(0,a.jsxs)(j,{className:"text-lg flex items-center",children:[(0,a.jsx)(B.A,{className:"h-5 w-5 mr-2"}),H?"3D":"2D"," Warehouse View",(0,a.jsxs)("span",{className:"ml-auto text-sm font-normal text-gray-500 mr-4",children:["Showing ",J.length," of ",e.length," slots"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u,{variant:H?"default":"outline",size:"sm",onClick:()=>Q(!0),disabled:Y,children:"3D"}),(0,a.jsx)(u,{variant:H?"outline":"default",size:"sm",onClick:()=>Q(!1),children:"2D"})]})]})}),(0,a.jsx)(f,{className:"h-full p-0",children:(0,a.jsx)("div",{className:"h-full w-full",children:H&&!Y?(0,a.jsx)(ev,{onError:()=>{G(!0),Q(!1)},children:(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading 3D view..."})]})}),children:(0,a.jsx)(eD,{slots:J,selectedSlot:i,onSlotSelect:K,onError:()=>{G(!0),Q(!1)}})})}):(0,a.jsx)(eS,{slots:J,selectedSlot:i,onSlotSelect:K})})})]})})]}),(0,a.jsx)(ef,{isOpen:N,onClose:()=>{b(!1),_(null)},pallet:W,slotLocation:(null==i?void 0:i.location)||"",onEditPallet:e=>{I(e),P(!0)},onDeletePallet:()=>Z((null==i?void 0:i.id)||""),onAddProduct:()=>{M(null),R(!0)},onEditProduct:e=>{M(e),R(!0)},onDeleteProduct:e=>{if(confirm("Are you sure you want to delete this product?")&&W){let t=W.products.filter(s=>s.id!==e),a={...W,products:t};s(e=>e.map(e=>{var s;return(null===(s=e.pallet)||void 0===s?void 0:s.id)===W.id?{...e,pallet:a}:e})),_(a)}}}),(0,a.jsx)(ee,{isOpen:S,onClose:()=>{P(!1),I(null)},pallet:F,onSave:e=>{if(F)s(s=>s.map(s=>{var t;return(null===(t=s.pallet)||void 0===t?void 0:t.id)===F.id?{...s,pallet:{...s.pallet,...e}}:s}));else if(i){let t={id:"P".concat(Math.random().toString(36).substr(2,6).toUpperCase()),products:[],weight:0,dimensions:{length:120,width:100,height:80},supplier:"",notes:"",...e};s(e=>e.map(e=>e.id===i.id?{...e,occupied:!0,pallet:t}:e))}P(!1),I(null)},slotLocation:null==i?void 0:i.location}),(0,a.jsx)(eg,{isOpen:A,onClose:()=>{R(!1),M(null)},product:q,onSave:e=>{let t;if(!W)return;if(q)t=W.products.map(s=>s.id===q.id?{...s,...e}:s);else{let s={id:"PROD-".concat(Math.random().toString(36).substr(2,6).toUpperCase()),...e};t=[...W.products,s]}let a={...W,products:t};s(e=>e.map(e=>{var s;return(null===(s=e.pallet)||void 0===s?void 0:s.id)===W.id?{...e,pallet:a}:e})),_(a),R(!1),M(null)}})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[367,831,683,413,32,441,684,358],()=>s(3134)),_N_E=e.O()}]);